<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AgroSense - Smart Agriculture Solutions</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../static/images/your-crop-image.png" />

  <!-- Bootstrap CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Font Awesome Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="../static/Style/style.css" />
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="#">
        <img src="../static/images/Logo.png" alt="AgroSense Logo"
             style="height:35px;width:35px;border-radius:50%;" />
        <span id="navTitle">AgroSense</span>
      </a>
      
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <!-- Microphone Button -->
          <li class="nav-item">
            <button class="mic-button" id="micButton" onclick="toggleRecording()">
              <i class="fas fa-microphone"></i>
            </button>
          </li>
 
          <!-- Menu Dropdown -->
          <li class="nav-item dropdown">
            <button class="dropdown-toggle" type="button" data-bs-toggle="dropdown">
              <span id="menuText">Menu</span>
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#" id="menuHome">Home</a></li>
              <li><a class="dropdown-item" href="#" id="menuAbout">About</a></li>
              <li><a class="dropdown-item" href="#" id="menuServices">Services</a></li>
              <li><a class="dropdown-item" href="#" id="menuContact">Contact</a></li>
            </ul>
          </li>

          <!-- Language Selector -->
          <li class="nav-item">
            <select class="language-selector" id="languageSelector" onchange="changeLanguage()">
              <option value="en">English</option>
              <option value="hi">हिंदी</option>
              <option value="mr">मराठी</option>
            </select>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container">
      <div class="hero-slogan-wrapper">
        <h1 class="hero-text" id="heroText">
          Is your Crop facing one of these?? Let's find out
        </h1>

        <!-- Inline Arrow beside slogan -->
        <div class="arrow-inline-container">
          <div class="arrow-container">
            <div class="arrow">
              <div class="arrow-head"></div>
              <div class="arrow-shaft"></div>
              <div class="arrow-feathers">
                <div class="feather"></div>
                <div class="feather"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Slideshow Section -->
  <section class="slideshow-section">
    <div class="container">
      <div class="slideshow-container">
        <div class="carousel-track">
          <!-- Add more images as needed -->
          <div class="carousel-item far"><img src="../static/images/image1.jpg" alt="Slide 1" /></div>
          <div class="carousel-item prev"><img src="../static/images/image2.jpg" alt="Slide 2" /></div>
          <div class="carousel-item active"><img src="../static/images/image3.jpg" alt="Slide 3" /></div>
          <div class="carousel-item next"><img src="../static/images/image4.jpg" alt="Slide 4" /></div>
          <div class="carousel-item far"><img src="../static/images/image5.jpg" alt="Slide 5" /></div>
          <div class="carousel-item far"><img src="../static/images/image6.jpg" alt="Slide 6" /></div>
          <div class="carousel-item far"><img src="../static/images/image7.jpg" alt="Slide 7" /></div>
          <div class="carousel-item far"><img src="../static/images/image8.jpg" alt="Slide 8" /></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Bootstrap JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

  <!-- JavaScript -->
  <script>
    const translations = {
      en: {
        navTitle: "AgroSense", 
        heroText: "Is your Crop facing one of these?? Let's Find out",
        menuText: "Menu", 
        menuHome: "Home", 
        menuAbout: "About",
        menuServices: "Services", 
        menuContact: "Contact"
      },
      hi: {
        navTitle: "एग्रोसेंस", 
        heroText: "क्या आपकी फसल इनमें से किसी एक का सामना कर रही है? आइए जानें",
        menuText: "मेनू", 
        menuHome: "होम", 
        menuAbout: "हमारे बारे में",
        menuServices: "सेवाएं", 
        menuContact: "संपर्क"
      },
      mr: {
        navTitle: "अ‍ॅग्रोसेंस", 
        heroText: "तुमच्या पिकाला यापैकी काही समस्या आहेत का?? चला जाणून घेऊया.",
        menuText: "मेनू", 
        menuHome: "मुख्यपृष्ठ", 
        menuAbout: "आमच्याबद्दल",
        menuServices: "सेवा", 
        menuContact: "संपर्क"
      }
    };

    function changeLanguage() {
      const lang = document.getElementById('languageSelector').value;
      const t = translations[lang] || translations.en;

      for (const id in t) {
        const el = document.getElementById(id);
        if (el) {
          el.textContent = t[id];
          console.log(`Updated ${id} → ${t[id]}`);
        } else {
          console.warn(`Missing element for id: ${id}`);
        }
      }
    }

    // Initialize language on load
    document.addEventListener("DOMContentLoaded", () => {
      changeLanguage();

      const track = document.querySelector(".carousel-track");

      function rotateSlidesForward() {
        const items = track.querySelectorAll(".carousel-item");
        track.appendChild(items[0]);
        items.forEach(item => item.classList.remove("active"));
        const updatedItems = track.querySelectorAll(".carousel-item");
        const mid = Math.floor(updatedItems.length / 2);
        updatedItems[mid].classList.add("active");
      }

      const items = track.querySelectorAll(".carousel-item");
      const mid = Math.floor(items.length / 2);
      items[mid].classList.add("active");

      setInterval(rotateSlidesForward, 3000);
    });

    // Voice Recognition
    let isRecording = false;
    let recog;

    function toggleRecording() {
      const micBtn = document.getElementById('micButton');
      const icon = micBtn.querySelector('i');
      const searchInput = document.getElementById('searchInput');

      if (!isRecording && ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window)) {
        const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
        recog = new SR();
        const langMap = { en: 'en-US', hi: 'hi-IN', mr: 'mr-IN' };
        recog.lang = langMap[document.getElementById('languageSelector').value] || 'en-US';

        recog.onstart = () => {
          isRecording = true;
          micBtn.classList.add('recording');
          icon.classList.replace('fa-microphone', 'fa-stop');
        };

        recog.onend = () => {
          isRecording = false;
          micBtn.classList.remove('recording');
          icon.classList.replace('fa-stop', 'fa-microphone');
        };

        recog.onresult = (e) => {
          const transcript = e.results[0][0].transcript;
          if (searchInput) searchInput.value = transcript;
        };

        recog.onerror = (e) => {
          alert(`Speech error: ${e.error}`);
        };

        recog.start();
      } else if (isRecording && recog) {
        recog.stop();
      } else {
        alert('Speech recognition not supported.');
      }
    }
  </script>
</body>
</html>